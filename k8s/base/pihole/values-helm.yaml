# Configuration for mojo2600/pihole Helm chart

# Web UI on port 8080 (avoids Traefik on 80/443). Access via Tailscale IP.
# webHttps must be set to avoid port 443 conflict even though HTTPS is disabled.
serviceWeb:
  type: ClusterIP
  http:
    port: 8080
  https:
    enabled: false

webHttp: "8080"
webHttps: "8443"

# DNS Service - uses hostNetwork for direct port 53 exposure
serviceDns:
  type: ClusterIP
  port: 53

serviceDhcp:
  enabled: false

# Persistence for configuration and logs
persistentVolumeClaim:
  enabled: true
  accessModes:
    - ReadWriteOnce
  size: 1Gi
  storageClass: "local-path"

# Persistence for custom DNS settings (dnsmasq)
persistentVolumeClaimDnsmasq:
  enabled: true
  accessModes:
    - ReadWriteOnce
  size: 1Gi
  storageClass: "local-path"

# Set a default password (change this!)
# adminPassword: "changeme"

# Use existing secret
admin:
  existingSecret: "pihole-secret"
  passwordKey: "password"

# Resource limits
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

# Ensure it runs on the Pi
nodeSelector:
  kubernetes.io/hostname: pi

# Use HostNetwork mode for direct LAN exposure
hostNetwork: true

# Upstream DNS servers (Cloudflare)
DNS1: "1.1.1.1"
DNS2: "1.0.0.1"
